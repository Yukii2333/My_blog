---
title: Linux--权限
date: 2023-05-21 20:39:26
categories: Linux
tags: 
 - Linux
description:
cover:
---

# Shell命令以及运行原理

Linux是一个操作系统，我们称之为“核心（kernel）”，但是对于一般的用户，不能直接使用kernel。是通过kernel的“外壳”程序（shell），来与kernel进行沟通。因为直接上手对内核操作，对于用户门槛会很高，且更容易出现各种问题。

**Shell的大概作用：**

* 将使用者的指令翻译给核心（kernel）处理
* 将核心的处理结果翻译给使用者

当然，对于错误的指令，shell会直接进行判断，不会翻译给内核。

![概念图](https://raw.githubusercontent.com/Yukii2333/Images/main/for_blog_background/202305241845202.png "概念图")

# 权限

## 用户

### Linux下用户分类

**root：**超级用户

**普通用户：**新建的用户，adduser



**root用户基本不受权限的约束，普通用户是收权限约束的，超级用户的命令提示是 `#`，普通用户的命令提示是 `$`**

### 切换用户

**命令 `su [用户名]`**

**功能：**切换用户

从root用户切换至普通用户直接`su [username]`就可以切换，不需要密码验证，而普通用户切换为root用户需要输入root用户的密码

## 权限管理

### 文件访问者分类

* u---user    文件和文件目录的所有者
* g---group   文件和文件目录所有者所在组的用户
* o---other    其他用户

### 文件的类型和访问权限

如下

![权限划分](https://raw.githubusercontent.com/Yukii2333/Images/main/for_blog_background/202305241859782.png "权限划分")

第一行（白色的框）表示的是**文件的类型**

第二行（红色的框）表示的是**各用户的权限**，三个字母为一组

* 第一组表示`user`的权限
* 第二组表示`group`的权限
* 第三组表示`other`的权限

第三行（数字行）表示**连接数**，后面会深入讲

第四行（名字）是`user`名字

第五行（名字）是`user`所属组的名字

后面依次是大小、创建时间、文件名

#### 文件类型

~~~
d：文件夹
-：普通文件
l：软链接（类似windows的快捷方式）
b：块设备文件（如磁盘、光盘等）
p：管道文件
c：字符设备文件（如屏幕等串口设备）
s：套接文件
~~~

#### 基本权限

~~~
r：read，对于文件是读取文件内容的权限，对于目录是浏览目录信息的权限
w：write，对于文件是修改文件内容的权限，对于目录是删除或移动目录内文件的权限
x：execute，对于文件是执行文件的权限，对于目录是进入该目录的权限
-：表示不具有对应位置的权限
~~~

## 文件权值表示方法

### 字符表示

~~~
r--   只读           -w-     仅可写
--x   仅可执行        rw-     可读可写
-wx   可写可执行      r-x     可写可执行
rwx   可写可读可执行   ---     无权限
~~~

### 8进制数值表示法

| 权限符号 | 八进制 | 二进制 |
| :------: | :----: | :----: |
|   r--    |   4    |  100   |
|   -w-    |   2    |  010   |
|   --x    |   1    |  001   |
|   rw-    |   6    |  110   |
|   rwx    |   7    |  111   |
|   ---    |   0    |  000   |

## 文件权限设置方法

### chmode

**语法：**chmod [参数] 权限 文件名

**功能：**设置文件的访问权限

**常用选项：**

* -R    递归修改目录文件的权限
* 用户表示符+/-/=权限字符
  * ​    +    向权限范围增加权限代号表示的权限
  * ​    -     向权限范围取消权限符号表示的权限
  * ​    =    向权限范围赋予权限代号所表示的权限

![增加用户权限](https://raw.githubusercontent.com/Yukii2333/Images/main/for_blog_background/202305260929585.png "增加用户权限")

![修改other权限](https://raw.githubusercontent.com/Yukii2333/Images/main/for_blog_background/202305260931193.png "修改other权限")

**说明：**只有文件的拥有者以及root才可以改变文件的访问权限，修改权限可以用八进制对整体进行修改



### chown

**语法：**chown [参数] 用户名 文件名

**功能：**修改文件拥有者

**常用选项：**

* -R    递归处理

![修改用户](https://raw.githubusercontent.com/Yukii2333/Images/main/for_blog_background/202305260943395.png "修改用户")



### chgrp

**语法：**chgrp [参数] 用户名 文件名

**功能：**修改文件所属组

**常用选项：**

* -R    递归处理

![修改所属组](https://raw.githubusercontent.com/Yukii2333/Images/main/for_blog_background/202305260949442.png "修改所属组")



### umask

**语法：**umask 权限值

**功能：**

查看或修改文件掩码

新建文件夹的默认权限为`0666`

新建目录默认权限为`0777`

但是实际上我们所创建的文件和目录，看见的权限往往不是上面这个值。因为创建文件或者目录的时候还受到`umask`的影响。假设默认权限是`mask`（当成一个八进制数字），则实际权限为`mask&(~umask)`

**说明：**将现有的存取权限减去权限掩码后，即可产生建立文件时预设权限。root用户的默认掩码为`0022`，普通用户为`0002`，`umask`后接数值就可以修改掩码

![默认掩码](https://raw.githubusercontent.com/Yukii2333/Images/main/for_blog_background/202305261023274.png "默认掩码")



## 目录权限

* 可执行权限：如果目录没有可执行权限，就无法`cd 目录名`进入目录
* 可读权限：如果目录没有可读权限，则无法用`ls`等命令查看目录中的文件内容
* 可写权限：如果目录没有可写权限，则无法在目录中创建或者删除内容



**也就是说，只要用户有目录的写权限，就可以删除目录下的内容，无论该内容是否是该用户创建以及该用户是否拥有该内容的读写执行权限**

在未来的使用场景下，Linux并不是只有一个人使用，而是一个公司的一部分人共同进行开发维护

为了解决这个问题，Linux引入了**粘滞位**的概念

### 粘滞位

**用法：**chmod +t 目录名

当一个目录被设置为`粘滞位`时，则该目录下的文件只能由

* 超级管理员删除
* 目录或文件的拥有者删除





























































